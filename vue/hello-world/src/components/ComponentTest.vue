<template>
    <div id="example">
        <span>Message: {{ msg }}</span>
        <hr>

        <h3>è®¡ç®—å±æ€§å’Œç›‘å¬å™¨</h3>
        <p><b>Original</b> message: "{{ message }}"</p>
        <p><b>Computed</b> reversed message: "{{ reversedMessage }}"</p>
        <p><b>Methods</b> Reversed message: "{{ reversedMessage2() }}"</p>

        <h4>ä¾¦å¬å™¨Watch</h4>
        <p>
            Ask a yes/no question:
            <input v-model="question">
        </p>
        <p>{{ answer }}</p>    
        <hr>

        <h3>Class ä¸ Style ç»‘å®š</h3>   
        <!-- active è¿™ä¸ª class å­˜åœ¨ä¸å¦å°†å–å†³äºæ•°æ® property isActive -->
        <p v-bind:class="{active: isActive}">isActive: {{isActive}}</p>
        <p v-bind:class="classObject">classObject isActive: {{classObject}}</p>
        <p v-bind:style="[styleObject]">å†…è”styleObject:  {{styleObject}}</p>

        <hr>

        <h3>æ¡ä»¶æ¸²æŸ“</h3>
        <h4>v-if</h4>
        <button v-on:click="awesome = awesome?false:true">Change awesome</button>
        <p v-if="awesome">Vue is awesome!</p>
        <p v-else>Oh no ğŸ˜¢, awesome is :{{awesome}}</p>

        <h4>ç”¨ key ç®¡ç†å¯å¤ç”¨çš„å…ƒç´ </h4>
        <div id="no-key-example" class="demo">
            <div v-if="loginType == 'username'">
                <label>Username</label> 
                <input placeholder="Enter your username" key="username-input">
            </div>
            <div v-else>
                <label>Email</label>
                <input placeholder="Enter your email address" key="email-input">
            </div>
             <button v-on:click="loginType=loginType?'':'username'">Toggle login type</button>
        </div>
        <hr>

        <h3>åˆ—è¡¨æ¸²æŸ“</h3>

        <h4>ç”¨ v-for æŠŠä¸€ä¸ªæ•°ç»„å¯¹åº”ä¸ºä¸€ç»„å…ƒç´ </h4>
        <ul id="example-1">
        <li v-for="item in items" :key="item.message">
            {{ item.message }}
        </li>
        </ul>

        <ul id="example-2">
        <li v-for="(item, index) in items" :key="item.message">
            {{ parentMessage }} - {{ index }} - {{ item.message }}
        </li>
        </ul>        

        <h4>åœ¨ v-for é‡Œä½¿ç”¨å¯¹è±¡</h4>
        <ul id="v-for-object" class="demo">
        <li v-for="value in objectFor" :key="value">
            {{ value }}
        </li>
        </ul>

        <div v-for="(value, name) in objectFor" :key="name">
        {{ name }}: {{ value }}
        </div> 
        <br>
        <div v-for="(value, name, index) in objectFor" :key="name">
        {{ index }}. {{ name }}: {{ value }}
        </div>                       
        <hr>

        <h3>äº‹ä»¶å¤„ç†</h3>
        <h4>ç›‘å¬äº‹ä»¶</h4>
        <div id="example-1">
            <button v-on:click="counter += 1">Add 1</button>
            <p>The button above has been clicked {{ counter }} times.</p>
        </div>        
        <h4>äº‹ä»¶å¤„ç†æ–¹æ³•</h4>
        <div id="example-2">
            <!-- `greet` æ˜¯åœ¨ä¸‹é¢å®šä¹‰çš„æ–¹æ³•å -->
            <button v-on:click="greet">Greet</button>
        </div>
        <h4>å†…è”å¤„ç†å™¨ä¸­çš„æ–¹æ³•</h4>
        <div id="example-3">
            <button v-on:click="say('hi')">Say hi</button>
            <button v-on:click="say('what',$event)">Say what</button>
        </div> 
        <hr>

        <h3>è¡¨å•è¾“å…¥ç»‘å®š</h3>        
        <h4>æ–‡æœ¬</h4>
        <input v-model="message" placeholder="edit me">
        <p>Message is: {{ message }}</p>           

        <h4>å¤šè¡Œæ–‡æœ¬</h4>
        <span>Multiline message is:</span>
        <p style="white-space: pre-line;">{{ message }}</p>
        <br>
        <textarea v-model="message" placeholder="add multiple lines"></textarea>        

        <h4>å¤é€‰æ¡†</h4>
        <div>
            <input type="checkbox" id="checkbox" v-model="checked">
            <label for="checkbox">{{ checked }}</label>              
        </div>      
        <br>

   
        <div id='example-3'>
            <input type="checkbox" id="jack" value="Jack" v-model="checkedNames">
            <label for="jack">Jack</label>
            <input type="checkbox" id="john" value="John" v-model="checkedNames">
            <label for="john">John</label>
            <input type="checkbox" id="mike" value="Mike" v-model="checkedNames">
            <label for="mike">Mike</label>
            <br>
            <span>Checked names: {{ checkedNames }}</span>
        </div>        
        <br>

        <h4>å•é€‰æŒ‰é’®</h4>
        <div id="example-4">
            <input type="radio" id="one" value="One" v-model="picked">
            <label for="one">One</label>
            <br>
            <input type="radio" id="two" value="Two" v-model="picked">
            <label for="two">Two</label>
            <br>
            <span>Picked: {{ picked }}</span>
        </div>

        <h4>é€‰æ‹©æ¡†</h4>
        <div id="example-5">
            <select v-model="selected">
                <option disabled value="">è¯·é€‰æ‹©</option>
                <option value="a">A</option>
                <option>B</option>
                <option>C</option>
            </select>
            <span>Selected: {{ selected }}</span>
        </div>        

    </div>
</template>



<script>
    import _ from "lodash";
    import axios from 'axios'    
    export default {
        name: 'ComponetTest',  
        // same as :  data(){...}      
        data: function(){
            return {                
                message: 'Hello World',

                question:'',
                answer: 'I cannot give you an answer until you ask a question!',

                isActive: true,


                awesome: false,
                styleObject:{
                    color: 'red',
                    fontSize: '13px'
                },

                loginType: '',


                parentMessage: 'Parent',
                items:[
                    { message: 'Foo' },
                    { message: 'Bar' }
                ],

                objectFor:{
                    title: 'How to do lists in Vue',
                    author: 'Jane Doe',
                    publishedAt: '2016-04-10'
                },
                counter: 0,

                checked: false,
                checkedNames: [],
                picked:'',
                selected:''
            }
        },
        props: {
            msg: String,           
        },
        watch: {
            // å¦‚æœ `question` å‘ç”Ÿæ”¹å˜ï¼Œè¿™ä¸ªå‡½æ•°å°±ä¼šè¿è¡Œ
            question: function (newQuestion, oldQuestion) {
                console.log(newQuestion)
                console.log(oldQuestion)
                this.answer = 'Waiting for you to stop typing...'
                this.debouncedGetAnswer()
            }            
        },
        created() {
            // `_.debounce` æ˜¯ä¸€ä¸ªé€šè¿‡ Lodash é™åˆ¶æ“ä½œé¢‘ç‡çš„å‡½æ•°ã€‚
            // åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›é™åˆ¶è®¿é—® yesno.wtf/api çš„é¢‘ç‡
            // AJAX è¯·æ±‚ç›´åˆ°ç”¨æˆ·è¾“å…¥å®Œæ¯•æ‰ä¼šå‘å‡ºã€‚æƒ³è¦äº†è§£æ›´å¤šå…³äº
            // `_.debounce` å‡½æ•° (åŠå…¶è¿‘äº² `_.throttle`) çš„çŸ¥è¯†ï¼Œ
            // è¯·å‚è€ƒï¼šhttps://lodash.com/docs#debounce
            this.debouncedGetAnswer = _.debounce(this.getAnswer, 500)            
        },
        methods: {
            reversedMessage2: function () {
                return this.message.split('').reverse().join('')
            },
            getAnswer(){
                if(this.question.indexOf('?')===-1){
                    this.answer = 'Questions usually contain a question mark. ;-)'
                    return
                }
                this.answer = 'Thinking...'      
                var vm = this
                axios.get('https://yesno.wtf/api',{timeout:60000})
                    .then(function (response) {
                    vm.answer = _.capitalize(response.data.answer)
                    })
                    .catch(function (error) {
                        vm.answer = 'Error! Could not reach the API. ' + error
                    })                          
            } ,
            greet(event){
                // `this` åœ¨æ–¹æ³•é‡ŒæŒ‡å‘å½“å‰ Vue å®ä¾‹
                alert('Hello ' + this.message + '!')
                // `event` æ˜¯åŸç”Ÿ DOM äº‹ä»¶
                if (event) {
                    alert(event.target.tagName)
                }                
            } ,
            say(message,event){
                alert(message+":"+event)
            }
        },
        
        computed: {
            // same as : reversedMessage(){...}
            reversedMessage: function(){
                return this.message.split('').reverse().join('')
            },

            // è®¡ç®—æ ·å¼å±æ€§
            classObject(){
                return {
                    active: this.isActive,
                    color: 'rgb(220, 20, 20)',
                    fontSize: 16
                }
            }
        },
    }
</script>

<style scoped>
b {
  color: #D4228A;
}

.active{
    color: rgb(220, 20, 20);
    font-size: 17px;
    font-style: italic;
}
</style>